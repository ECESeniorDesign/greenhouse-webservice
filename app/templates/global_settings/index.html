{% extends "layout.html" %}
{% block header %}
<title>Greenhouse Settings</title>
{% endblock %}
{% block nav %}
<div id="spacer"></div>
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="pull-left">
      <a class="navbar-brand" href="{{ url_for('PlantsController.index') }}">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      </a>
    </div>
  </div>
</nav>
{% endblock%}
{% block body %}
<div class="row">
  <div class="col-sm-8 col-sm-offset-2 text-center">
    <div class="row">
      <h1>Greenhouse Settings</h1>
    </div>
    <form action="{{ url_for('GlobalSettingsController.create') }}" method="post">
      {% for control in controls %}
        <div class="control-row">
          <div class="form-inline">
            <div class="form-group">
              <label class="setting-label">{{ control.name.title() }}</label>
              <input type="hidden" name="id" value="{{ control.id }}">
            </div>
            {% if control.enabled %}
              <div class="form-group">
                <input name="active_start" type="text" class="form-control time ui-timepicker-input" autocomplete="off" placeholder="Start Time" value="{{ control.active_start_time }}">
              </div>
              <div class="form-group">
                <input name="active_end" type="text" class="form-control time ui-timepicker-input" autocomplete="off" placeholder="End Time" value="{{ control.active_end_time }}">
              </div>
            {% else %}
              <div class="form-group">
                <input name="active_start" type="text" class="form-control ui-timepicker-input" autocomplete="off" placeholder="Start Time" disabled>
              </div>
              <div class="form-group">
                <input name="active_end" type="text" class="form-control ui-timepicker-input" autocomplete="off" placeholder="End Time" disabled>
              </div>
            {% endif %}
            <div class="form-group">
              {% if control.enabled %}
                {% if control.active %}
                  <a class="btn btn-warning" data-action="update-control" data-mode="temporary_disable" id="toggle_control_{{ control.id }}"><i class="fa fa-pause"></i></a>
                {% else %}
                  <a class="btn btn-success" data-action="update-control" data-mode="activate" id="toggle_control_{{ control.id }}"><i class="fa fa-play"></i></a>
                {% endif %}
              {% else %}
                <a class="btn btn-success disabled" data-action="update-control" data-mode="activate" id="toggle_control_{{ control.id }}"><i class="fa fa-play"></i></a>
              {% endif %}
            </div>
            <div class="form-group">
              {% if control.enabled %}
                <input type="checkbox" name="enabled" value="{{ control.id }}" checked>
              {% else %}
                <input type="checkbox" name="enabled" value="{{ control.id }}">
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
      <button type="submit" class="btn btn-default">Submit</button>
    </form>
  </div>
</div>
<script src="{{ url_for('static', filename='js/global_settings/index.js') }}"></script>
{% endblock %}
